(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,n)=>{t.exports=e.r(76562)},28030,e=>{"use strict";var t=e.i(43476),n=e.i(71645),a=e.i(18566),l=e.i(7471);function s(){let e=(0,a.useRouter)(),[s,d]=(0,n.useState)(null),[p,f]=(0,n.useState)("staff"),[x,h]=(0,n.useState)([]),[g,u]=(0,n.useState)([]),[m,y]=(0,n.useState)(!0),[j,b]=(0,n.useState)(!1),[S,v]=(0,n.useState)(null),[k,w]=(0,n.useState)({name:"",staff_code:"",pin:"",role:"staff"}),[C,_]=(0,n.useState)(""),[z,T]=(0,n.useState)(!1),[R,L]=(0,n.useState)(""),[N,I]=(0,n.useState)(""),[F,W]=(0,n.useState)("");(0,n.useEffect)(()=>{let t=sessionStorage.getItem("admin_session");if(!t)return void e.push("/admin");let n=JSON.parse(t),a=new Date(n.loginAt).getTime();if(Date.now()-a>72e5){sessionStorage.removeItem("admin_session"),e.push("/admin");return}d(n),y(!1)},[e]);let B=(0,n.useCallback)(async()=>{let{data:e}=await l.supabase.from("staff").select("*").order("created_at",{ascending:!1});e&&h(e)},[]),D=(0,n.useCallback)(async()=>{let e=l.supabase.from("time_logs").select("*, staff(*)").order("check_in",{ascending:!1}).limit(200);F&&(e=e.eq("staff_id",F)),R&&(e=e.gte("check_in",R)),N&&(e=e.lte("check_in",N+"T23:59:59"));let{data:t}=await e;t&&u(t)},[F,R,N]);async function G(e){e.preventDefault(),_(""),T(!0);try{if(S){let e={name:k.name,staff_code:k.staff_code.toUpperCase(),role:k.role};if(k.pin){let{error:e}=await l.supabase.rpc("update_staff_pin",{p_staff_id:S.id,p_new_pin:k.pin});if(e){_("Failed to update PIN."),T(!1);return}}let{error:t}=await l.supabase.from("staff").update(e).eq("id",S.id);if(t){_(t.message),T(!1);return}}else{let{error:e}=await l.supabase.rpc("create_staff",{p_staff_code:k.staff_code.toUpperCase(),p_name:k.name,p_pin:k.pin,p_role:k.role});if(e){_(e.message),T(!1);return}}b(!1),v(null),w({name:"",staff_code:"",pin:"",role:"staff"}),B()}catch{_("An error occurred.")}finally{T(!1)}}async function A(e){await l.supabase.from("staff").update({active:!e.active}).eq("id",e.id),B()}return(0,n.useEffect)(()=>{!m&&s&&(B(),D())},[m,s,B,D]),m?(0,t.jsx)("div",{style:c.container,children:(0,t.jsx)("p",{style:{color:"#666"},children:"Loading..."})}):(0,t.jsxs)("div",{style:c.page,children:[(0,t.jsxs)("header",{style:c.header,children:[(0,t.jsxs)("div",{style:c.headerLeft,children:[(0,t.jsx)("span",{style:{fontSize:24},children:"ðŸˆâ€â¬›"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{style:c.headerTitle,children:"SMOKEY'S"}),(0,t.jsx)("p",{style:c.headerSub,children:"Admin Dashboard"})]})]}),(0,t.jsxs)("div",{style:c.headerRight,children:[(0,t.jsx)("span",{style:c.adminName,children:s?.name}),(0,t.jsx)("button",{onClick:function(){sessionStorage.removeItem("admin_session"),e.push("/admin")},style:c.logoutBtn,children:"Logout"})]})]}),(0,t.jsx)("nav",{style:c.tabs,children:["staff","logs","reports","qrcode","settings"].map(e=>(0,t.jsx)("button",{onClick:()=>f(e),style:{...c.tab,...p===e?c.tabActive:{}},children:"staff"===e?"ðŸ‘¥ Staff":"logs"===e?"ðŸ“‹ Time Logs":"reports"===e?"ðŸ“Š Reports":"qrcode"===e?"ðŸ“± QR Code":"âš™ï¸ Settings"},e))}),(0,t.jsxs)("main",{style:c.main,children:["staff"===p&&(0,t.jsxs)("div",{className:"animate-fadeIn",children:[(0,t.jsxs)("div",{style:c.sectionHeader,children:[(0,t.jsx)("h2",{style:c.sectionTitle,children:"Staff Management"}),(0,t.jsx)("button",{onClick:()=>{v(null),w({name:"",staff_code:"",pin:"",role:"staff"}),b(!0)},className:"btn-primary",style:{width:"auto",padding:"10px 20px"},children:"+ Add Staff"})]}),j&&(0,t.jsx)("div",{style:c.formOverlay,children:(0,t.jsxs)("form",{onSubmit:G,style:c.staffFormCard,children:[(0,t.jsx)("h3",{style:c.formTitle,children:S?"Edit Staff":"Add New Staff"}),(0,t.jsxs)("div",{style:c.formGrid,children:[(0,t.jsxs)("div",{style:c.inputGroup,children:[(0,t.jsx)("label",{style:c.formLabel,children:"Name"}),(0,t.jsx)("input",{className:"input-field",value:k.name,onChange:e=>w({...k,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{style:c.inputGroup,children:[(0,t.jsx)("label",{style:c.formLabel,children:"Staff Code"}),(0,t.jsx)("input",{className:"input-field",value:k.staff_code,onChange:e=>w({...k,staff_code:e.target.value.toUpperCase()}),placeholder:"e.g. SMK001",required:!0,disabled:!!S})]}),(0,t.jsxs)("div",{style:c.inputGroup,children:[(0,t.jsxs)("label",{style:c.formLabel,children:["PIN ",S&&"(leave blank to keep)"]}),(0,t.jsx)("input",{type:"password",className:"input-field",value:k.pin,onChange:e=>w({...k,pin:e.target.value.replace(/\D/g,"").slice(0,6)}),inputMode:"numeric",maxLength:6,required:!S})]}),(0,t.jsxs)("div",{style:c.inputGroup,children:[(0,t.jsx)("label",{style:c.formLabel,children:"Role"}),(0,t.jsxs)("select",{className:"input-field",value:k.role,onChange:e=>w({...k,role:e.target.value}),children:[(0,t.jsx)("option",{value:"staff",children:"Staff"}),(0,t.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),C&&(0,t.jsxs)("p",{style:c.formError,children:["âš ï¸ ",C]}),(0,t.jsxs)("div",{style:c.formActions,children:[(0,t.jsx)("button",{type:"button",onClick:()=>b(!1),style:c.cancelBtn,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"btn-primary",disabled:z,style:{width:"auto",padding:"10px 24px"},children:z?"Saving...":S?"Update":"Create"})]})]})}),(0,t.jsx)("div",{style:c.tableContainer,children:(0,t.jsxs)("table",{style:c.table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:c.th,children:"Code"}),(0,t.jsx)("th",{style:c.th,children:"Name"}),(0,t.jsx)("th",{style:c.th,children:"Role"}),(0,t.jsx)("th",{style:c.th,children:"Status"}),(0,t.jsx)("th",{style:c.th,children:"Actions"})]})}),(0,t.jsx)("tbody",{children:x.map(e=>(0,t.jsxs)("tr",{style:c.tr,children:[(0,t.jsx)("td",{style:c.td,children:(0,t.jsx)("code",{style:c.code,children:e.staff_code})}),(0,t.jsx)("td",{style:c.td,children:e.name}),(0,t.jsx)("td",{style:c.td,children:(0,t.jsx)("span",{style:{...c.badge,background:"admin"===e.role?"rgba(240,180,39,0.15)":"rgba(99,102,241,0.15)",color:"admin"===e.role?"#f0b427":"#818cf8"},children:e.role})}),(0,t.jsx)("td",{style:c.td,children:(0,t.jsx)("span",{style:{...c.badge,background:e.active?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",color:e.active?"#22c55e":"#ef4444"},children:e.active?"Active":"Inactive"})}),(0,t.jsx)("td",{style:c.td,children:(0,t.jsxs)("div",{style:c.actionBtns,children:[(0,t.jsx)("button",{onClick:()=>{v(e),w({name:e.name,staff_code:e.staff_code,pin:"",role:e.role}),b(!0)},style:c.actionBtn,children:"Edit"}),(0,t.jsx)("button",{onClick:()=>A(e),style:{...c.actionBtn,color:e.active?"#ef4444":"#22c55e"},children:e.active?"Deactivate":"Activate"})]})})]},e.id))})]})})]}),"logs"===p&&(0,t.jsxs)("div",{className:"animate-fadeIn",children:[(0,t.jsxs)("div",{style:c.sectionHeader,children:[(0,t.jsx)("h2",{style:c.sectionTitle,children:"Time Logs"}),(0,t.jsx)("button",{onClick:function(){let e=new Blob([[["Staff ID","Staff Name","Date","Check In","Check Out","Total Hours","GPS","IP"],...g.map(e=>{let t=e.staff;return[t?.staff_code||"",t?.name||"",new Date(e.check_in).toLocaleDateString(),new Date(e.check_in).toLocaleTimeString(),e.check_out?new Date(e.check_out).toLocaleTimeString():"Still In",e.total_hours?.toFixed(2)||"-",`${e.gps_lat},${e.gps_lng}`,e.ip_address||""]})].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=`smokeys-time-logs-${new Date().toISOString().slice(0,10)}.csv`,n.click(),URL.revokeObjectURL(t)},className:"btn-primary",style:{width:"auto",padding:"10px 20px"},children:"ðŸ“¥ Export CSV"})]}),(0,t.jsxs)("div",{style:c.filterBar,children:[(0,t.jsxs)("div",{style:c.filterGroup,children:[(0,t.jsx)("label",{style:c.filterLabel,children:"From"}),(0,t.jsx)("input",{type:"date",className:"input-field",value:R,onChange:e=>L(e.target.value)})]}),(0,t.jsxs)("div",{style:c.filterGroup,children:[(0,t.jsx)("label",{style:c.filterLabel,children:"To"}),(0,t.jsx)("input",{type:"date",className:"input-field",value:N,onChange:e=>I(e.target.value)})]}),(0,t.jsxs)("div",{style:c.filterGroup,children:[(0,t.jsx)("label",{style:c.filterLabel,children:"Staff"}),(0,t.jsxs)("select",{className:"input-field",value:F,onChange:e=>W(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"All Staff"}),x.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.staff_code,")"]},e.id))]})]}),(0,t.jsx)("button",{onClick:D,className:"btn-primary",style:{width:"auto",padding:"10px 20px",alignSelf:"flex-end"},children:"Apply"})]}),(0,t.jsx)("div",{style:c.tableContainer,children:(0,t.jsxs)("table",{style:c.table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:c.th,children:"Staff"}),(0,t.jsx)("th",{style:c.th,children:"Date"}),(0,t.jsx)("th",{style:c.th,children:"In"}),(0,t.jsx)("th",{style:c.th,children:"Out"}),(0,t.jsx)("th",{style:c.th,children:"Hours"}),(0,t.jsx)("th",{style:c.th,children:"IP"})]})}),(0,t.jsxs)("tbody",{children:[g.map(e=>{let n=e.staff;return(0,t.jsxs)("tr",{style:c.tr,children:[(0,t.jsx)("td",{style:c.td,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontWeight:600},children:n?.name}),(0,t.jsx)("div",{style:{fontSize:12,color:"#666"},children:n?.staff_code})]})}),(0,t.jsx)("td",{style:c.td,children:new Date(e.check_in).toLocaleDateString()}),(0,t.jsx)("td",{style:c.td,children:new Date(e.check_in).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,t.jsx)("td",{style:c.td,children:e.check_out?new Date(e.check_out).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):(0,t.jsx)("span",{style:{color:"#f0b427"},children:"Still In"})}),(0,t.jsx)("td",{style:c.td,children:e.total_hours?(0,t.jsxs)("span",{style:{fontWeight:600},children:[e.total_hours.toFixed(2),"h"]}):"-"}),(0,t.jsx)("td",{style:c.td,children:(0,t.jsx)("span",{style:{fontSize:12,color:"#666"},children:e.ip_address})})]},e.id)}),0===g.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,style:{...c.td,textAlign:"center",color:"#666",padding:"40px 16px"},children:"No time logs found for the selected filters."})})]})]})})]}),"reports"===p&&(0,t.jsxs)("div",{className:"animate-fadeIn",children:[(0,t.jsx)("h2",{style:c.sectionTitle,children:"Reports"}),(0,t.jsxs)("div",{style:c.reportGrid,children:[(0,t.jsx)(o,{title:"Today's Attendance",logs:g,type:"today",staffList:x}),(0,t.jsx)(o,{title:"This Week",logs:g,type:"week",staffList:x}),(0,t.jsx)(o,{title:"This Month",logs:g,type:"month",staffList:x})]})]}),"qrcode"===p&&(0,t.jsx)(r,{}),"settings"===p&&(0,t.jsx)(i,{})]})]})}function i(){let[e,a]=(0,n.useState)(""),[s,i]=(0,n.useState)(null),[r,o]=(0,n.useState)(100),[d,p]=(0,n.useState)(null),[f,x]=(0,n.useState)(!1),[h,g]=(0,n.useState)(!1),[u,m]=(0,n.useState)(""),[y,j]=(0,n.useState)(!1);async function b(){let{data:e}=await l.supabase.from("settings").select("*").limit(1).single();e&&(p(e),o(e.radius_meters||100),e.restaurant_lat&&e.restaurant_lng&&i({lat:e.restaurant_lat,lng:e.restaurant_lng}))}async function S(){m(""),g(!1);let t=e;if(!t){let e=document.querySelector('input[placeholder="Paste Google Maps link or lat,lng"]');e?.value&&a(t=e.value)}if(t.includes("maps.app.goo.gl")||t.includes("goo.gl/maps")){j(!0);try{let e=await fetch("https://gqtmbjazzlosatgmcfxh.supabase.co/functions/v1/resolve-maps-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})}),n=await e.json();if(n.resolvedUrl)t=n.resolvedUrl,a(t);else{m("Could not resolve shortened URL. Try pasting the full Google Maps URL instead."),j(!1);return}}catch{m("Network error resolving shortened URL. Try pasting the full Google Maps URL instead."),j(!1);return}j(!1)}let n=function(e){let t=e.trim(),n=t.match(/^(-?\d+\.\d+),\s*(-?\d+\.\d+)$/);if(n)return{lat:parseFloat(n[1]),lng:parseFloat(n[2])};let a=t.match(/[?&](?:q|ll|center)=(-?\d+\.\d+),(-?\d+\.\d+)/);if(a)return{lat:parseFloat(a[1]),lng:parseFloat(a[2])};let l=t.match(/@(-?\d+\.\d+),(-?\d+\.\d+)/);if(l)return{lat:parseFloat(l[1]),lng:parseFloat(l[2])};let s=t.match(/\/place\/(-?\d+\.\d+),(-?\d+\.\d+)/);return s?{lat:parseFloat(s[1]),lng:parseFloat(s[2])}:null}(t);if(n){if(n.lat<-90||n.lat>90||n.lng<-180||n.lng>180){m("Coordinates out of valid range."),i(null);return}i(n)}else m('Could not extract coordinates. Try pasting the full Google Maps URL or enter raw coordinates like "40.7128,-74.0060".'),i(null)}async function v(){let e;if(!s)return;x(!0),g(!1),m("");let t={restaurant_lat:s.lat,restaurant_lng:s.lng,radius_meters:r};if(e=d?(await l.supabase.from("settings").update(t).eq("id",d.id)).error:(await l.supabase.from("settings").insert(t)).error){console.error("Save error:",e),m(`Save failed: ${e.message}`),x(!1);return}let{data:n}=await l.supabase.from("settings").select("*").limit(1).single();n&&(p(n),o(n.radius_meters||100)),x(!1),g(!0),setTimeout(()=>g(!1),3e3)}(0,n.useEffect)(()=>{b()},[]);let k=s?`https://maps.googleapis.com/maps/api/staticmap?center=${s.lat},${s.lng}&zoom=16&size=400x250&markers=color:red%7C${s.lat},${s.lng}&key=&style=feature:all|element:geometry|color:0x242f3e`:null;return(0,t.jsxs)("div",{className:"animate-fadeIn",children:[(0,t.jsx)("h2",{style:c.sectionTitle,children:"Restaurant Settings"}),(0,t.jsx)("p",{style:{color:"#999",fontSize:14,marginTop:8,marginBottom:24},children:"Set your restaurant's location so the app can verify staff are on-site when clocking in."}),(0,t.jsxs)("div",{style:{display:"flex",gap:32,flexWrap:"wrap",alignItems:"flex-start"},children:[(0,t.jsxs)("div",{style:{flex:"1 1 340px"},children:[(0,t.jsxs)("div",{className:"card",style:{padding:24},children:[(0,t.jsx)("h3",{style:{fontSize:14,fontWeight:700,color:"#f0b427",margin:"0 0 16px"},children:"ðŸ“ Set Location"}),(0,t.jsx)("label",{style:{fontSize:12,fontWeight:600,color:"#999",textTransform:"uppercase",letterSpacing:"0.5px",display:"block",marginBottom:6},children:"Google Maps Link or Coordinates"}),(0,t.jsx)("input",{className:"input-field",value:e,onChange:e=>{a(e.target.value),m(""),g(!1)},placeholder:"Paste Google Maps link or lat,lng"}),(0,t.jsxs)("p",{style:{fontSize:11,color:"#666",marginTop:6,lineHeight:1.5},children:['Open Google Maps â†’ find your restaurant â†’ tap "Share" â†’ copy the link and paste it here. Or just type the coordinates like ',(0,t.jsx)("span",{style:{color:"#f0b427"},children:"40.7128,-74.0060"})]}),(0,t.jsx)("button",{onClick:S,className:"btn-primary",style:{marginTop:12,marginBottom:0},disabled:y,children:y?"â³ Resolving linkâ€¦":"ðŸ” Extract Coordinates"}),u&&(0,t.jsx)("p",{style:{color:"#ff6b6b",fontSize:13,marginTop:10},children:u})]}),s&&(0,t.jsxs)("div",{className:"card",style:{padding:24,marginTop:16},children:[(0,t.jsx)("h3",{style:{fontSize:14,fontWeight:700,color:"#f0b427",margin:"0 0 16px"},children:"âœ… Coordinates Found"}),(0,t.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:16},children:[(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("label",{style:{fontSize:11,color:"#666",display:"block",marginBottom:4},children:"Latitude"}),(0,t.jsx)("div",{style:{background:"#1a1a1a",border:"1px solid #333",borderRadius:8,padding:"10px 12px",color:"#4ecdc4",fontFamily:"monospace",fontSize:14},children:s.lat.toFixed(6)})]}),(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("label",{style:{fontSize:11,color:"#666",display:"block",marginBottom:4},children:"Longitude"}),(0,t.jsx)("div",{style:{background:"#1a1a1a",border:"1px solid #333",borderRadius:8,padding:"10px 12px",color:"#4ecdc4",fontFamily:"monospace",fontSize:14},children:s.lng.toFixed(6)})]})]}),(0,t.jsx)("label",{style:{fontSize:12,fontWeight:600,color:"#999",textTransform:"uppercase",letterSpacing:"0.5px",display:"block",marginBottom:6},children:"Check-in Radius"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,t.jsx)("input",{type:"range",min:25,max:5e3,step:25,value:r,onChange:e=>o(Number(e.target.value)),style:{flex:1,accentColor:"#f0b427"}}),(0,t.jsx)("span",{style:{color:"#f0b427",fontWeight:700,fontSize:16,minWidth:60,textAlign:"right"},children:r>=1e3?`${(r/1e3).toFixed(1)}km`:`${r}m`})]}),(0,t.jsx)("p",{style:{fontSize:11,color:"#666",marginTop:4},children:"Staff must be within this distance from the restaurant to clock in. 100m is recommended for most locations. Slide right for up to 5km."}),(0,t.jsx)("button",{onClick:v,className:"btn-primary",disabled:f,style:{marginTop:16},children:f?"Saving...":h?"âœ… Saved!":"ðŸ’¾ Save Location"}),h&&(0,t.jsx)("p",{style:{color:"#4ecdc4",fontSize:13,marginTop:8,textAlign:"center"},children:"Restaurant location updated successfully! Staff GPS checks will use this location."})]})]}),(0,t.jsxs)("div",{style:{flex:"1 1 340px"},children:[(0,t.jsxs)("div",{className:"card",style:{padding:24},children:[(0,t.jsx)("h3",{style:{fontSize:14,fontWeight:700,color:"#f0b427",margin:"0 0 12px"},children:"ðŸ“ Current Location"}),d?.restaurant_lat&&d?.restaurant_lng?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{display:"flex",gap:16,marginBottom:12},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{fontSize:11,color:"#666"},children:"Lat: "}),(0,t.jsx)("span",{style:{color:"#4ecdc4",fontFamily:"monospace"},children:d.restaurant_lat.toFixed(6)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{fontSize:11,color:"#666"},children:"Lng: "}),(0,t.jsx)("span",{style:{color:"#4ecdc4",fontFamily:"monospace"},children:d.restaurant_lng.toFixed(6)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{fontSize:11,color:"#666"},children:"Radius: "}),(0,t.jsx)("span",{style:{color:"#f0b427",fontWeight:700},children:d.radius_meters>=1e3?`${(d.radius_meters/1e3).toFixed(1)}km`:`${d.radius_meters}m`})]}),(0,t.jsx)("a",{href:`https://www.google.com/maps/@${d.restaurant_lat},${d.restaurant_lng},17z`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:12,color:"#f0b427",fontSize:13,textDecoration:"underline"},children:"View on Google Maps â†—"}),k&&(0,t.jsx)("div",{style:{marginTop:16,borderRadius:12,overflow:"hidden",border:"1px solid #333",background:"#1a1a1a",padding:12,textAlign:"center"},children:(0,t.jsxs)("div",{style:{width:"100%",height:200,borderRadius:8,background:"#222",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:8},children:[(0,t.jsx)("span",{style:{fontSize:40},children:"ðŸ“"}),(0,t.jsxs)("span",{style:{color:"#4ecdc4",fontFamily:"monospace",fontSize:13},children:[s?.lat.toFixed(4),", ",s?.lng.toFixed(4)]}),(0,t.jsxs)("span",{style:{color:"#666",fontSize:11},children:["Radius: ",r,"m"]})]})})]}):(0,t.jsxs)("div",{style:{background:"#1a1a1a",border:"2px dashed #333",borderRadius:12,padding:"40px 20px",textAlign:"center"},children:[(0,t.jsx)("span",{style:{fontSize:40},children:"ðŸª"}),(0,t.jsx)("p",{style:{color:"#666",fontSize:13,marginTop:12},children:"No location set yet. Paste a Google Maps link to set your restaurant's location."})]})]}),(0,t.jsxs)("div",{className:"card",style:{padding:24,marginTop:16},children:[(0,t.jsx)("h3",{style:{fontSize:14,fontWeight:700,color:"#f0b427",margin:"0 0 12px"},children:"ðŸ’¡ How It Works"}),(0,t.jsxs)("ol",{style:{color:"#999",fontSize:13,lineHeight:2,margin:0,paddingLeft:20},children:[(0,t.jsxs)("li",{children:["Open ",(0,t.jsx)("strong",{style:{color:"#ccc"},children:"Google Maps"})," on your phone"]}),(0,t.jsx)("li",{children:"Search for or navigate to your restaurant"}),(0,t.jsxs)("li",{children:["Tap ",(0,t.jsx)("strong",{style:{color:"#ccc"},children:"Share"})," â†’ ",(0,t.jsx)("strong",{style:{color:"#ccc"},children:"Copy Link"})]}),(0,t.jsxs)("li",{children:["Paste the link above and click ",(0,t.jsx)("strong",{style:{color:"#ccc"},children:"Extract Coordinates"})]}),(0,t.jsxs)("li",{children:["Adjust the check-in radius and ",(0,t.jsx)("strong",{style:{color:"#ccc"},children:"Save"})]})]})]})]})]})]})}function r(){let[a,l]=(0,n.useState)(""),[s,i]=(0,n.useState)(""),[r,o]=(0,n.useState)(!1);async function d(){let t=s.trim()||window.location.origin;try{let n=(await e.A(73378)).default,a=await n.toDataURL(t,{width:400,margin:2,color:{dark:"#111111",light:"#ffffff"},errorCorrectionLevel:"H"});l(a),o(!0)}catch(e){console.error("QR generation failed:",e)}}return(0,n.useEffect)(()=>{i(window.location.origin)},[]),(0,t.jsxs)("div",{className:"animate-fadeIn",children:[(0,t.jsx)("h2",{style:c.sectionTitle,children:"QR Code Generator"}),(0,t.jsx)("p",{style:{color:"#999",fontSize:14,marginTop:8,marginBottom:24},children:"Generate a QR code to print and place at the restaurant entrance or kitchen. Staff scan this code with their phone to open the clock-in page."}),(0,t.jsxs)("div",{style:{display:"flex",gap:"32px",flexWrap:"wrap",alignItems:"flex-start"},children:[(0,t.jsxs)("div",{style:{flex:"1 1 300px"},children:[(0,t.jsxs)("div",{className:"card",style:{padding:24},children:[(0,t.jsxs)("div",{style:{marginBottom:16},children:[(0,t.jsx)("label",{style:{fontSize:12,fontWeight:600,color:"#999",textTransform:"uppercase",letterSpacing:"0.5px",display:"block",marginBottom:6},children:"App URL"}),(0,t.jsx)("input",{className:"input-field",value:s,onChange:e=>i(e.target.value),placeholder:"https://your-deployed-url.com"}),(0,t.jsx)("p",{style:{fontSize:12,color:"#666",marginTop:6},children:"This is the URL staff will be directed to when they scan the QR code. Use your deployed URL (e.g. Vercel) for production."})]}),(0,t.jsx)("button",{onClick:d,className:"btn-primary",style:{marginBottom:12},children:r?"ðŸ”„ Regenerate QR Code":"ðŸ“± Generate QR Code"}),r&&(0,t.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,t.jsx)("button",{onClick:function(){if(!a)return;let e=document.createElement("a");e.href=a,e.download="smokeys-staff-clock-qr.png",e.click()},className:"btn-secondary",style:{flex:1,padding:"10px 12px",fontSize:13},children:"ðŸ“¥ Download PNG"}),(0,t.jsx)("button",{onClick:function(){if(!a)return;let e=window.open("","_blank");e&&(e.document.write(`
            <html>
                <head><title>Smokey's QR Code</title></head>
                <body style="display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;font-family:Inter,sans-serif;background:#fff;">
                    <h1 style="font-size:32px;letter-spacing:4px;color:#111;">SMOKEY'S</h1>
                    <p style="font-size:16px;color:#666;margin-bottom:24px;">Scan to Clock In / Out</p>
                    <img src="${a}" style="width:300px;height:300px;" />
                    <p style="font-size:12px;color:#999;margin-top:16px;">${s||window.location.origin}</p>
                </body>
            </html>
        `),e.document.close(),e.onload=()=>{e.print()})},className:"btn-secondary",style:{flex:1,padding:"10px 12px",fontSize:13},children:"ðŸ–¨ï¸ Print"})]})]}),(0,t.jsxs)("div",{className:"card",style:{padding:24,marginTop:16},children:[(0,t.jsx)("h3",{style:{fontSize:14,fontWeight:700,color:"#f0b427",margin:"0 0 12px"},children:"ðŸ“ Placement Tips"}),(0,t.jsxs)("ul",{style:{color:"#999",fontSize:13,lineHeight:1.8,margin:0,paddingLeft:20},children:[(0,t.jsx)("li",{children:"Print on a sturdy card or laminate it"}),(0,t.jsx)("li",{children:"Place at the entrance and inside the kitchen"}),(0,t.jsx)("li",{children:"Make sure it's at eye level and well-lit"}),(0,t.jsx)("li",{children:"Staff need WiFi or data to connect after scanning"}),(0,t.jsx)("li",{children:"The QR code only opens the login page â€” GPS + PIN are still required"})]})]})]}),(0,t.jsx)("div",{style:{flex:"1 1 300px",display:"flex",justifyContent:"center"},children:r&&a?(0,t.jsxs)("div",{style:{background:"#fff",borderRadius:20,padding:"40px 32px",textAlign:"center",maxWidth:380,width:"100%",boxShadow:"0 8px 40px rgba(0,0,0,0.3)"},children:[(0,t.jsx)("h2",{style:{fontSize:24,fontWeight:900,color:"#111",letterSpacing:4,margin:"0 0 4px"},children:"SMOKEY'S"}),(0,t.jsx)("p",{style:{fontSize:13,color:"#666",margin:"0 0 20px"},children:"Scan to Clock In / Out"}),(0,t.jsx)("img",{src:a,alt:"Staff Clock QR Code",style:{width:"100%",maxWidth:280,height:"auto",borderRadius:8}}),(0,t.jsx)("p",{style:{fontSize:11,color:"#999",marginTop:16,wordBreak:"break-all"},children:s||window.location.origin})]}):(0,t.jsxs)("div",{style:{background:"#1a1a1a",border:"2px dashed #333",borderRadius:20,padding:"60px 32px",textAlign:"center",maxWidth:380,width:"100%"},children:[(0,t.jsx)("span",{style:{fontSize:48},children:"ðŸ“±"}),(0,t.jsx)("p",{style:{color:"#666",fontSize:14,marginTop:16},children:'Click "Generate QR Code" to create a scannable code for your staff.'})]})})]})]})}function o({title:e,logs:n,type:a,staffList:l}){let s=new Date,i=n.filter(e=>{let t=new Date(e.check_in);if("today"===a)return t.toDateString()===s.toDateString();if("week"===a){let e=new Date(s);return e.setDate(e.getDate()-7),t>=e}return"month"!==a||t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}),r=i.reduce((e,t)=>e+(t.total_hours||0),0),o=new Set(i.map(e=>e.staff_id)).size,c=l.filter(e=>e.active&&"staff"===e.role).length;return(0,t.jsxs)("div",{style:d.card,children:[(0,t.jsx)("h3",{style:d.title,children:e}),(0,t.jsxs)("div",{style:d.stats,children:[(0,t.jsxs)("div",{style:d.stat,children:[(0,t.jsx)("span",{style:d.statValue,children:i.length}),(0,t.jsx)("span",{style:d.statLabel,children:"Entries"})]}),(0,t.jsxs)("div",{style:d.stat,children:[(0,t.jsxs)("span",{style:d.statValue,children:[o,"/",c]}),(0,t.jsx)("span",{style:d.statLabel,children:"Staff Present"})]}),(0,t.jsxs)("div",{style:d.stat,children:[(0,t.jsx)("span",{style:d.statValue,children:r.toFixed(1)}),(0,t.jsx)("span",{style:d.statLabel,children:"Total Hours"})]})]})]})}let d={card:{background:"#222",border:"1px solid #333",borderRadius:"16px",padding:"24px"},title:{fontSize:"16px",fontWeight:700,color:"#f0b427",margin:"0 0 20px"},stats:{display:"flex",gap:"20px"},stat:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},statValue:{fontSize:"28px",fontWeight:800,color:"#fff"},statLabel:{fontSize:"12px",color:"#666",marginTop:"4px",textTransform:"uppercase",letterSpacing:"0.5px"}},c={container:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},page:{minHeight:"100vh",background:"#111"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",borderBottom:"1px solid #222",background:"#1a1a1a",position:"sticky",top:0,zIndex:50},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerTitle:{fontSize:"18px",fontWeight:900,color:"#f0b427",letterSpacing:"3px",margin:0},headerSub:{fontSize:"11px",color:"#666",margin:0,letterSpacing:"1px"},headerRight:{display:"flex",alignItems:"center",gap:"12px"},adminName:{fontSize:"14px",color:"#999"},logoutBtn:{padding:"6px 14px",background:"transparent",border:"1px solid #333",borderRadius:"8px",color:"#999",fontSize:"13px",cursor:"pointer",fontFamily:"Inter, sans-serif"},tabs:{display:"flex",gap:"0",borderBottom:"1px solid #222",background:"#1a1a1a",paddingLeft:"24px"},tab:{padding:"14px 24px",background:"transparent",border:"none",borderBottom:"2px solid transparent",color:"#666",fontSize:"14px",fontWeight:600,cursor:"pointer",fontFamily:"Inter, sans-serif",transition:"all 0.2s"},tabActive:{color:"#f0b427",borderBottomColor:"#f0b427"},main:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"12px"},sectionTitle:{fontSize:"20px",fontWeight:700,color:"#fff",margin:0},tableContainer:{overflowX:"auto",borderRadius:"12px",border:"1px solid #222"},table:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},th:{padding:"12px 16px",textAlign:"left",background:"#1a1a1a",color:"#999",fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px",borderBottom:"1px solid #222"},tr:{borderBottom:"1px solid #1a1a1a"},td:{padding:"12px 16px",color:"#ccc"},code:{background:"#222",padding:"2px 8px",borderRadius:"6px",fontSize:"13px",color:"#f0b427",fontFamily:"monospace"},badge:{padding:"4px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:600,textTransform:"capitalize"},actionBtns:{display:"flex",gap:"8px"},actionBtn:{padding:"4px 12px",background:"transparent",border:"1px solid #333",borderRadius:"6px",color:"#999",fontSize:"13px",cursor:"pointer",fontFamily:"Inter, sans-serif",transition:"all 0.2s"},filterBar:{display:"flex",gap:"12px",flexWrap:"wrap",marginBottom:"20px",padding:"16px",background:"#1a1a1a",borderRadius:"12px",border:"1px solid #222"},filterGroup:{display:"flex",flexDirection:"column",gap:"4px",flex:"1 1 150px"},filterLabel:{fontSize:"11px",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},formOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:100,padding:"20px"},staffFormCard:{background:"#1a1a1a",borderRadius:"20px",padding:"32px",width:"100%",maxWidth:"500px",border:"1px solid #333"},formTitle:{fontSize:"20px",fontWeight:700,color:"#fff",margin:"0 0 24px"},formGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},inputGroup:{display:"flex",flexDirection:"column",gap:"6px"},formLabel:{fontSize:"12px",fontWeight:600,color:"#999",textTransform:"uppercase",letterSpacing:"0.5px"},formActions:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"24px"},formError:{color:"#ef4444",fontSize:"14px",marginTop:"12px"},cancelBtn:{padding:"10px 24px",background:"transparent",border:"1px solid #333",borderRadius:"12px",color:"#999",fontSize:"14px",cursor:"pointer",fontFamily:"Inter, sans-serif"},reportGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"16px",marginTop:"16px"}};e.s(["default",()=>s])},73378,e=>{e.v(t=>Promise.all(["static/chunks/0cbbe76af706843a.js"].map(t=>e.l(t))).then(()=>t(73134)))}]);