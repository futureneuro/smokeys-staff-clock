(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(7471);function n(e){return e*Math.PI/180}let o={en:{appTitle:"SMOKEY'S",staffClock:"Staff Clock",adminPortal:"Admin Portal",permTitle:"Location Needed",permMessage:"Tap the button below to allow location access so you can clock in.",permButton:"üìç ENABLE LOCATION",loadingTitle:"Verifying your location...",loadingHint:"Please allow location access when prompted",locErrorTitle:"Location Required",tryAgain:"TRY AGAIN",distError:"You are {dist} away. Must be within {radius} of Smokey's.",locVerified:"Location verified",away:"away",staffId:"Staff ID",staffIdPlaceholder:"e.g. SMK001",pin:"PIN",pinPlaceholder:"Enter your PIN",checkIn:"‚ú¶ CHECK IN",checkOut:"CHECK OUT ‚ú¶",enterBoth:"Please enter your Staff ID and PIN.",noLocation:"Location not available. Please refresh and allow location access.",networkError:"Network error. Please check your connection and try again.",adminDashboard:"Admin Dashboard ‚Üí",checkInQuote:'"Clock in. Stay sharp."',checkOutQuote:'"Good hustle. See you tomorrow."',totalHours:"Total Hours",done:"Done",langToggle:"üá®üá¥ Espa√±ol"},es:{appTitle:"SMOKEY'S",staffClock:"Reloj de Personal",adminPortal:"Portal de Admin",permTitle:"Ubicaci√≥n Necesaria",permMessage:"Toca el bot√≥n para permitir el acceso a tu ubicaci√≥n y poder registrarte.",permButton:"üìç ACTIVAR UBICACI√ìN",loadingTitle:"Verificando tu ubicaci√≥n...",loadingHint:"Por favor permite el acceso a tu ubicaci√≥n",locErrorTitle:"Ubicaci√≥n Requerida",tryAgain:"INTENTAR DE NUEVO",distError:"Est√°s a {dist} de distancia. Debes estar dentro de {radius} de Smokey's.",locVerified:"Ubicaci√≥n verificada",away:"de distancia",staffId:"ID de Empleado",staffIdPlaceholder:"ej. SMK001",pin:"PIN",pinPlaceholder:"Ingresa tu PIN",checkIn:"‚ú¶ ENTRADA",checkOut:"SALIDA ‚ú¶",enterBoth:"Por favor ingresa tu ID de empleado y PIN.",noLocation:"Ubicaci√≥n no disponible. Actualiza la p√°gina y permite el acceso.",networkError:"Error de red. Revisa tu conexi√≥n e intenta de nuevo.",adminDashboard:"Panel de Admin ‚Üí",checkInQuote:'"A trabajar. Vamos con todo."',checkOutQuote:'"Buen trabajo. Nos vemos ma√±ana."',totalHours:"Horas Totales",done:"Listo",langToggle:"üá∫üá∏ English"}};function r(e,t,i){let a=o[e]?.[t]??o.en[t]??t;if(i)for(let[e,t]of Object.entries(i))a=a.replace(`{${e}}`,t);return a}function l(e,t){return e<1?`${Math.round(1e3*e)}m`:`${e.toFixed(1)}km`}function s(e,t){return new Intl.DateTimeFormat("es"===t?"es-CO":"en-US",{timeZone:"America/Bogota",hour:"numeric",minute:"2-digit",hour12:!0}).format(new Date(e))}function c(){let[e,o]=(0,i.useState)("needs_permission"),[c,p]=(0,i.useState)(""),[u,g]=(0,i.useState)(null),[x,h]=(0,i.useState)(""),[m,f]=(0,i.useState)(""),[y,b]=(0,i.useState)(""),[j,S]=(0,i.useState)(null),[k,T]=(0,i.useState)(null),[I,v]=(0,i.useState)(.1),[E,C]=(0,i.useState)("es");async function N(){o("loading"),p("");try{let e=await new Promise((e,t)=>{if(!navigator.geolocation)return void t(Error("Geolocation is not supported by your browser."));let i=t=>{e({lat:t.coords.latitude,lng:t.coords.longitude})},a=e=>{switch(e.code){case e.PERMISSION_DENIED:t(Error("Location access denied. Please enable location services in your browser settings to check in."));break;case e.POSITION_UNAVAILABLE:t(Error("Location information is unavailable. Please try again."));break;case e.TIMEOUT:t(Error("Location request timed out. Please try again."));break;default:t(Error("An unknown error occurred while getting location."))}};navigator.geolocation.getCurrentPosition(i,e=>{e.code===e.TIMEOUT?navigator.geolocation.getCurrentPosition(i,a,{enableHighAccuracy:!1,timeout:15e3,maximumAge:6e4}):a(e)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})});g(e);let{data:t}=await a.supabase.from("settings").select("restaurant_lat, restaurant_lng, radius_meters").limit(1).single();if(t?.restaurant_lat&&t?.restaurant_lng){let i,a,s,c,d,u={lat:t.restaurant_lat,lng:t.restaurant_lng},g=(t.radius_meters||100)/1e3;v(g);let x=(i=n(u.lat-e.lat),a=n(u.lng-e.lng),s=Math.sin(i/2),c=Math.sin(a/2),d=s*s+Math.cos(n(e.lat))*Math.cos(n(u.lat))*c*c,12742*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)));if(T(x),x>g){p(r(E,"distError",{dist:l(x,E),radius:l(g,E)})),o("location_error");return}}o("ready")}catch(e){p(e instanceof Error?e.message:"Failed to get location"),o("location_error")}}async function A(e){if(!x.trim()||!m.trim())return void b(r(E,"enterBoth"));if(!u)return void b(r(E,"noLocation"));b(""),o("submitting");try{let t=await fetch(a.EDGE_FUNCTION_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({staff_code:x.trim().toUpperCase(),pin:m.trim(),action:e,gps_lat:u.lat,gps_lng:u.lng})}),i=await t.json();if(!t.ok){b(i.error||"Something went wrong."),o("ready");return}S(i),o("success")}catch{b(r(E,"networkError")),o("ready")}}(0,i.useEffect)(()=>{let e=localStorage.getItem("smokeys_lang");("en"===e||"es"===e)&&C(e)},[]);let _=(0,t.jsx)("button",{onClick:function(){let e="en"===E?"es":"en";C(e),localStorage.setItem("smokeys_lang",e)},style:d.langToggle,children:r(E,"langToggle")});return"needs_permission"===e?(0,t.jsx)("div",{style:d.container,children:(0,t.jsxs)("div",{style:d.card,className:"animate-fadeIn",children:[_,(0,t.jsxs)("div",{style:d.logoSection,children:[(0,t.jsx)("span",{style:d.catEmoji,children:"üêà‚Äç‚¨õ"}),(0,t.jsx)("h1",{style:d.title,children:r(E,"appTitle")}),(0,t.jsx)("p",{style:d.subtitle,children:r(E,"staffClock")})]}),(0,t.jsxs)("div",{style:d.permSection,children:[(0,t.jsx)("div",{style:d.permIcon,children:"üìç"}),(0,t.jsx)("p",{style:d.permTitle,children:r(E,"permTitle")}),(0,t.jsx)("p",{style:d.permMessage,children:r(E,"permMessage")}),(0,t.jsx)("button",{onClick:N,className:"btn-primary",style:d.permButton,children:r(E,"permButton")})]})]})}):"loading"===e?(0,t.jsx)("div",{style:d.container,children:(0,t.jsxs)("div",{style:d.card,className:"animate-fadeIn",children:[_,(0,t.jsxs)("div",{style:d.logoSection,children:[(0,t.jsx)("span",{style:d.catEmoji,children:"üêà‚Äç‚¨õ"}),(0,t.jsx)("h1",{style:d.title,children:r(E,"appTitle")}),(0,t.jsx)("p",{style:d.subtitle,children:r(E,"staffClock")})]}),(0,t.jsxs)("div",{style:d.loadingSection,children:[(0,t.jsx)("div",{style:d.spinner,className:"animate-pulse-slow"}),(0,t.jsx)("p",{style:d.loadingText,children:r(E,"loadingTitle")}),(0,t.jsx)("p",{style:d.loadingHint,children:r(E,"loadingHint")})]})]})}):"location_error"===e?(0,t.jsx)("div",{style:d.container,children:(0,t.jsxs)("div",{style:d.card,className:"animate-fadeIn",children:[_,(0,t.jsxs)("div",{style:d.logoSection,children:[(0,t.jsx)("span",{style:d.catEmoji,children:"üêà‚Äç‚¨õ"}),(0,t.jsx)("h1",{style:d.title,children:r(E,"appTitle")}),(0,t.jsx)("p",{style:d.subtitle,children:r(E,"staffClock")})]}),(0,t.jsxs)("div",{style:d.errorSection,children:[(0,t.jsx)("div",{style:d.errorIcon,children:"üìç"}),(0,t.jsx)("p",{style:d.errorTitle,children:r(E,"locErrorTitle")}),(0,t.jsx)("p",{style:d.errorMessage,children:c}),(0,t.jsx)("button",{onClick:N,className:"btn-primary",style:{marginTop:16},children:r(E,"tryAgain")})]})]})}):"success"===e&&j?(0,t.jsx)("div",{style:d.container,children:(0,t.jsxs)("div",{style:d.card,className:"animate-slideUp",children:[_,(0,t.jsxs)("div",{style:d.logoSection,children:[(0,t.jsx)("span",{style:d.catEmoji,children:"üêà‚Äç‚¨õ"}),(0,t.jsx)("h1",{style:d.title,children:r(E,"appTitle")})]}),(0,t.jsxs)("div",{style:d.successSection,children:[(0,t.jsx)("div",{style:d.successIcon,children:"check_in"===j.action?"‚úÖ":"üëã"}),(0,t.jsx)("p",{style:d.successMessage,children:j.message}),j.check_in_time&&(0,t.jsxs)("p",{style:d.timeStamp,children:["üïê ",s(j.check_in_time,E)]}),j.check_out_time&&(0,t.jsxs)("p",{style:d.timeStamp,children:["üïê ",s(j.check_out_time,E)]}),(0,t.jsx)("p",{style:d.catQuote,children:"check_in"===j.action?r(E,"checkInQuote"):r(E,"checkOutQuote")}),void 0!==j.total_hours&&(0,t.jsxs)("div",{style:d.hoursCard,children:[(0,t.jsx)("span",{style:d.hoursLabel,children:r(E,"totalHours")}),(0,t.jsxs)("span",{style:d.hoursValue,children:[Math.floor(j.total_hours),"h ",Math.round((j.total_hours-Math.floor(j.total_hours))*60),"m"]})]})]}),(0,t.jsx)("button",{onClick:function(){h(""),f(""),b(""),S(null),o("ready")},className:"btn-secondary",style:{marginTop:24},children:r(E,"done")})]})}):(0,t.jsx)("div",{style:d.container,children:(0,t.jsxs)("div",{style:d.card,className:"animate-fadeIn",children:[_,(0,t.jsxs)("div",{style:d.logoSection,children:[(0,t.jsx)("span",{style:d.catEmoji,children:"üêà‚Äç‚¨õ"}),(0,t.jsx)("h1",{style:d.title,children:r(E,"appTitle")}),(0,t.jsx)("p",{style:d.subtitle,children:r(E,"staffClock")})]}),(0,t.jsxs)("div",{style:d.locationBadge,children:[(0,t.jsx)("span",{style:d.locationDot}),r(E,"locVerified"),null!==k&&(0,t.jsxs)("span",{style:{marginLeft:4,opacity:.7},children:["(",l(k,E)," ",r(E,"away"),")"]})]}),(0,t.jsxs)("div",{style:d.formSection,children:[(0,t.jsxs)("div",{style:d.inputGroup,children:[(0,t.jsx)("label",{style:d.label,children:r(E,"staffId")}),(0,t.jsx)("input",{type:"text",className:"input-field",placeholder:r(E,"staffIdPlaceholder"),value:x,onChange:e=>h(e.target.value.toUpperCase()),autoCapitalize:"characters",autoComplete:"off",disabled:"submitting"===e})]}),(0,t.jsxs)("div",{style:d.inputGroup,children:[(0,t.jsx)("label",{style:d.label,children:r(E,"pin")}),(0,t.jsx)("input",{type:"password",className:"input-field",placeholder:r(E,"pinPlaceholder"),value:m,onChange:e=>f(e.target.value.replace(/\D/g,"").slice(0,6)),inputMode:"numeric",maxLength:6,autoComplete:"off",disabled:"submitting"===e})]}),y&&(0,t.jsxs)("div",{style:d.errorBanner,className:"animate-fadeIn",children:[(0,t.jsx)("span",{children:"‚ö†Ô∏è"})," ",y]}),(0,t.jsxs)("div",{style:d.buttonGroup,children:[(0,t.jsx)("button",{onClick:()=>A("check_in"),className:"btn-primary",disabled:"submitting"===e,style:{flex:1},children:"submitting"===e?"...":r(E,"checkIn")}),(0,t.jsx)("button",{onClick:()=>A("check_out"),className:"btn-secondary",disabled:"submitting"===e,style:{flex:1},children:"submitting"===e?"...":r(E,"checkOut")})]})]}),(0,t.jsx)("a",{href:"/admin",style:d.adminLink,children:r(E,"adminDashboard")})]})})}let d={container:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",background:"linear-gradient(180deg, #111111 0%, #0a0a0a 100%)"},card:{width:"100%",maxWidth:"400px",background:"#1a1a1a",borderRadius:"24px",padding:"40px 28px",border:"1px solid #2a2a2a",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",position:"relative"},langToggle:{position:"absolute",top:"16px",right:"16px",background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:"20px",padding:"6px 14px",color:"#ccc",fontSize:"13px",cursor:"pointer",fontWeight:500,transition:"background 0.2s"},logoSection:{textAlign:"center",marginBottom:"28px"},catEmoji:{fontSize:"48px",display:"block",marginBottom:"8px"},title:{fontSize:"28px",fontWeight:900,color:"#f0b427",letterSpacing:"4px",margin:0},subtitle:{fontSize:"14px",color:"#666",letterSpacing:"2px",textTransform:"uppercase",marginTop:"4px"},permSection:{textAlign:"center",padding:"20px 0"},permIcon:{fontSize:"56px",marginBottom:"16px"},permTitle:{fontSize:"20px",fontWeight:700,color:"#f0b427",margin:"0 0 12px"},permMessage:{color:"#999",fontSize:"15px",margin:"0 0 24px",lineHeight:1.6},permButton:{fontSize:"16px",padding:"16px 32px",width:"100%"},locationBadge:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px 16px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"12px",color:"#22c55e",fontSize:"13px",fontWeight:500,marginBottom:"24px"},locationDot:{width:"8px",height:"8px",borderRadius:"50%",background:"#22c55e",display:"inline-block"},formSection:{display:"flex",flexDirection:"column",gap:"16px"},inputGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"13px",fontWeight:600,color:"#999",textTransform:"uppercase",letterSpacing:"1px"},errorBanner:{padding:"12px 16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",color:"#ef4444",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},buttonGroup:{display:"flex",gap:"12px",marginTop:"8px"},adminLink:{display:"block",textAlign:"center",marginTop:"24px",fontSize:"13px",color:"#666",textDecoration:"none"},loadingSection:{textAlign:"center",padding:"20px 0"},spinner:{width:"40px",height:"40px",borderRadius:"50%",background:"#f0b427",margin:"0 auto 16px"},loadingText:{color:"#fff",fontSize:"16px",fontWeight:500,margin:"0 0 4px"},loadingHint:{color:"#666",fontSize:"13px",margin:0},errorSection:{textAlign:"center",padding:"20px 0"},errorIcon:{fontSize:"48px",marginBottom:"12px"},errorTitle:{fontSize:"20px",fontWeight:700,color:"#ef4444",margin:"0 0 8px"},errorMessage:{color:"#999",fontSize:"14px",margin:0,lineHeight:1.5},successSection:{textAlign:"center",padding:"20px 0"},successIcon:{fontSize:"56px",marginBottom:"16px"},successMessage:{fontSize:"18px",fontWeight:600,color:"#fff",margin:"0 0 12px",lineHeight:1.4},timeStamp:{fontSize:"14px",color:"#aaa",margin:"0 0 8px"},catQuote:{fontSize:"15px",color:"#f0b427",fontStyle:"italic",margin:"0 0 20px"},hoursCard:{display:"flex",flexDirection:"column",alignItems:"center",padding:"16px",background:"rgba(240, 180, 39, 0.1)",border:"1px solid rgba(240, 180, 39, 0.2)",borderRadius:"12px",marginTop:"8px"},hoursLabel:{fontSize:"12px",color:"#999",textTransform:"uppercase",letterSpacing:"1px"},hoursValue:{fontSize:"28px",fontWeight:800,color:"#f0b427",marginTop:"4px"}};e.s(["default",()=>c],52683)}]);